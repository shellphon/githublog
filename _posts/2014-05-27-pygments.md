---
layout: post
title: 鼠标滚动下拉效果
---
{% highlight javascript %}
   var scrollDiv = document.getElementById("divScroll");
  var divContent = document.getElementById("divContent");
  var marginTop = 0;
  scrollDiv.addEventListener("mousewheel", function(e){
    //console.log(e.detail);
    //console.log(e.wheelDelta);
    if(e.wheelDelta>0){
      if(marginTop==0){
        return; 
      }
      marginTop+=10;
    }else{
     /* console.log(marginTop);
      console.log(scrollDiv.offsetHeight-420);*/
      if(marginTop+scrollDiv.offsetHeight<divContent.offsetHeight){
        return;
      }
      marginTop-=10;
    }
    scrollDiv.style["margin-top"] = marginTop+"px";
  });
 {% endhighlight %}
  - 上面代码中，通过实现mousewheel鼠标滚动事件来达到效果，不过这里firefox的实现有所不同，这里不多说，详细点[这里](http://www.zhangxinxu.com/wordpress/2013/04/js-mousewheel-dommousescroll-event/), 事件event参数会有一个wheelDelta的变量，每当滚动时，这个变量都会有一个值，测试了一下chrome下下滑鼠标，其值为-120，上滑时则为120，这个值就是决定我们改变margin-top大小的关键；
  - 虽然能滚动，但是总不能让内容无限上滚或者下滑吧，所以这里逻辑上要限制一下极限，这里用到了元素的实际高度offetHeight,因为实际上子元素的高度比较高，当子元素底部内容完全显示在父元素底部时，此时应该满足son.offsetHeight=father.offsetHeight+marginTop (这里的marginTop是指margin-top的绝对值，即溢出的那一部分高度)
  - 要注意下的是margin-top对应的js属性值应该是一个字符串，而offsetHeight是一个数值.    
#####记录完毕，实现[效果](http://shellphon.github.io/wechat/circle.html)